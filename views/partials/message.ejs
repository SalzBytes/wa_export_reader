<%
const bubbleClass = m.effects?.bubbleClass || '';
const textClass = m.effects?.textClass || '';
const badge = m.effects?.badge;
const isYou = m.isYourself;
%>

<div
  class="is-flex mb-3"
  style="
    justify-content:<%= isYou ? 'flex-end' : 'flex-start' %>;
  "
>
  <div
    class="box p-3 <%= bubbleClass %>"
    style="
      max-width:75%;
      border-radius:10px;
      margin-<%= isYou ? 'right' : 'left' %>:8px;
      background:<%= isYou ? '#d9fdd3' : '#ffffff' %>;
      box-shadow:0 1px 1px rgba(0,0,0,.08);
    "
  >

    <% if (badge) { %>
      <span class="tag is-rounded is-small <%= badge.class %> mb-1">
        <%= badge.label %>
      </span>
    <% } %>

    <div
      class="<%= textClass %>"
      style="white-space:pre-wrap; line-height:1.4;"
    >
      <%= m.text || '(view once media)' %>
    </div>

    <div
      class="has-text-right is-size-7 has-text-grey mt-1"
    >
      <%= m.time %>
    </div>

  </div>
</div>
